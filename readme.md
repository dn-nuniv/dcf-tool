# Monte-Carlo DCF Valuation Tool

**企業価値評価（DCF法）を Monte-Carlo シミュレーションで行い、理論株価の分布を可視化する Web ツールです。**  
割引率（r）や永続成長率（g）に幅を持たせた確率分布を用いることで、  
「DCFは一点予想で当てられない」という現実的な不確実性を反映した評価ができます。

🔗 デモ（GitHub Pages）  
https://dn-nuniv.github.io/dcf-tool/

---

## 🚀 Features（主な機能）

- Monte-Carlo 法による **理論株価の確率分布**の算定
- ヒストグラム表示と **モード値（最頻値）の視覚化**
- 割引率 / 成長率の **三角分布**を採用（モード中心の現実的分布）
- 選択可能な2つのモデル
  - **過去CFベースモデル**（平均FCF）
  - **将来予測ベースモデル**（1〜5年のFCFを入力）
- **感応度分析**（Sensitvity Heatmap）
- 入力単位変更（円 / 千円 / 百万円 / 億円）

---

## 📘 Inputs（入力項目）

| 項目 | 内容 |
|---|---|
| 営業CF（過去5年） | 選択単位で入力 |
| 有形・無形固定資産の取得額（過去5年） | CapEx として使用 |
| 現金・負債残高 | Net Debt を算出 |
| 株式数 | 1株価算出用 |
| 永続成長率 g | min / mode / max（小数で） |
| 割引率 r | min / mode / max または固定値 |

※ g ≥ r の場合はDCFモデルが破綻するため自動スキップまたは警告表示します。

---

## 🎯 Purpose（開発目的）

- 不確実性を考慮した**より現実的なDCF**を教育現場で活用する
- 「一点予想」ではなく **レンジで判断する思考**を育成する
- データサイエンスとファイナンス教育を接続する教材として活用

---

## 🛠 Technology（使用技術）

- HTML / CSS / JavaScript（Vanilla）
- Chart.js（ヒストグラム・ヒートマップ）
- GitHub Pages（ホスティング）

---

## 📊 実装モデル概要

各シミュレーション試行ごとに：

FCF₁ = FCF₀ × (1 + g)
TV = FCF₁ / (r − g)
Equity Value = TV − Net Debt
Stock Price = Equity Value / Shares

不正試行（r ≤ g）は除外。  
試行結果（通常10,000回以上）から統計量および分布を生成。

## 💡 FCF の定義について（簡易版の注意）

本ツールでは、実務上の複雑さと入力のしやすさを両立させるため、  
フリー・キャッシュフロー（FCF）を次のように **簡便的に定義**しています。

> **FCF ≒ 営業CF − 有形・無形固定資産の取得額（CapEx）**

具体的には：

- キャッシュフロー計算書の  
  **「営業活動によるキャッシュ・フロー」合計**（営業CF）
- 同じく投資CFの内訳に記載される  
  **「有形固定資産の取得による支出」**  
  および **「無形固定資産の取得による支出」**（CapEx）

のみを用いて FCF を近似しています。

### なぜ投資CF全体を使わないのか？

投資CFには、設備投資以外にも以下のような項目が含まれることが多くあります。

- 有価証券などの余資運用
- 子会社株式の取得・売却
- 貸付・回収
- その他の一時的な投資取引

これらをすべて「設備投資」とみなして差し引いてしまうと、  
**企業本来の事業活動が生み出す FCF から大きく乖離する可能性**があります。

そこで本ツールでは、

- 投資CFのうち **「有形・無形固定資産の取得額」に相当する部分のみ**を CapEx とみなし、
- 「営業CF − CapEx」で FCF を簡便的に近似する

という折衷案を採用しています。

### 限界と注意点

- 金融機関や特殊なビジネスモデルの企業など、  
  **CF計算書の構造自体が一般事業会社と異なるケース**では、本ツールの FCF 定義は適合しない場合があります。
- M&A（のれん）や大規模な投資プロジェクトを多用する企業では、  
  より精緻な調整が必要になることがあります。


本ツールはあくまで **「教育・分析の入口」を提供することを目的とした簡易DCFツール**であり、 最終的な投資判断や高度なバリュエーションには、個別企業の状況に応じた追加分析が必要です。
---

## 📦 Setup（導入方法）

```bash
git clone https://github.com/dn-nuniv/dcf-tool.git
cd dcf-tool
open index.html
```
ブラウザのみで実行できます（サーバ不要）。

⸻

📄 License

© Daisuke Nakamura, 2025
教育目的での利用を歓迎します。商用利用は別途ご相談ください。

⸻

👤 Author / Maintainer
	•	Daisuke Nakamura
	•	Nagoka University (Economics & Management)
	•	GitHub: https://github.com/dn-nuniv/

⸻

🔄 Changelog
	•	v1.0.0（2025-12-07）
　初期公開：Monte-Carlo DCF、将来予測モード、感応度分析対応

⸻

## 🔬 Academic Use / 研究利用について

本ツールは、今後、簿記・会計教育やファイナンス教育に関する  
教育実践・研究（紀要論文等）で取り上げる可能性があります。

- 授業・ゼミ・研修などで **自由に利用していただいて構いません**。
- ただし、本ツールのアイデアやコードをほぼそのまま用いて  
  **第三者が自分の業績として論文・記事等を公開することはお控えください**。
- 研究目的で利用される場合は、可能な範囲で本リポジトリ  
  （`https://github.com/dn-nuniv/dcf-tool`）を出典として明記してください。

ご不明な点や、研究での本格的な利用を検討される場合は、  
Issue やメール等でご相談いただければ幸いです
